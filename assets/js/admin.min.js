!function(a){function b(){var b=a(".wpcw-widget .form").not(".wpcw-widget-hours .form");b.sortable({items:"> *:not(.not-sortable)",handle:".wpcw-widget-sortable-handle",containment:"parent",placeholder:"sortable-placeholder",axis:"y",tolerance:"pointer",forcePlaceholderSize:!0,cursorAt:{top:40},stop:function(a,c){b.find(".customizer_update").val(c.item.index()).trigger("change")}})}a.fn.selectString=function(b){var c=a(this)[0],d=c.value.indexOf(b),e=d+b.length;if(c&&!(0>d))if(c.setSelectionRange)c.focus(),c.setSelectionRange(d,e);else if(c.createTextRange){var f=c.createTextRange();f.collapse(!0),f.moveEnd("character",e),f.moveStart("character",d),f.select()}else c.selectionStart&&(c.selectionStart=d,c.selectionEnd=e)};var c={$btn:null,$widget:null,$template:null,init:function(b){b.preventDefault();var d=c;return d.$btn=a(this),d.$widget=d.$btn.parents(".wpcw-widget"),d.$widget.find("."+d.$btn.data("key")).is(":animated")?!1:d.$btn.hasClass("inactive")?(d.$template=d.$widget.find(".default-fields"),d.$template=a(a.trim(d.$template.clone().html())),void d.add()):void d.remove()},add:function(){this.$btn.removeClass("inactive");var a=this.$btn.data();this.$template.addClass(a.key).find("label").prop("for",a.id),this.$template.find("input").prop("id",a.id).prop("name",a.name).prop("value",a.value),this.$template.find("label span.fa").prop("class",this.$btn.find("i").attr("class")),this.$template.find("label span.text").text(a.label),this.$template.hide().prependTo(this.$widget.find(".form")).stop(!0,!0).animate({height:"toggle",opacity:"toggle"},250),this.$template.find("input").selectString(a.select),this.update_customizer()},remove:function(){this.$btn.addClass("inactive"),this.$widget.find(".form ."+this.$btn.data("key")).stop(!0,!0).animate({height:"toggle",opacity:"toggle"},250,function(){a(this).remove()}),this.update_customizer()},update_customizer:function(){var a=this.$widget.find("div > div").length;this.$widget.find(".customizer_update").val(a).trigger("change")}};a(document).ready(function(a){a(document).on("click",".wpcw-widget-social .icons a",c.init),a("body").on("click",".day-container",function(){var b=a(this);b.find("div.hidden-container").slideToggle("fast",function(){return b.hasClass("closed")?void b.removeClass("closed").addClass("open"):void b.removeClass("open").addClass("closed")})}),a("body").on("click",".add-time",function(b){var c=a(this).parents(".hidden-container").find(".hours-selection").last(),d=c.clone();d.find('select[name*="[open]"], select[name*="[closed]"]').attr("name",function(a,b){return b.replace(/\[(\d+)\]$/,function(a,b){return"["+(+b+1)+"]"})}),d.find(".add-time").replaceWith('<a href="#" class="remove-time button-secondary"><span class="dashicons dashicons-no-alt"></span></a>'),d.insertAfter(c),b.preventDefault()}),a("body").on("click",".remove-time",function(b){var c=a(this),d=c.parent(".hours-selection");d.fadeOut("fast",function(){d.remove()}),b.preventDefalt()}),a("body").on("click",".js_wpcw_closed_checkbox, .wpcw-widget-hours select, .add-time, .remove-time, .js_wpcw_apply_hours_to_all",function(a){a.stopPropagation()}),a("body").on("change",".js_wpcw_closed_checkbox",function(b){var c=a(b.currentTarget).parents(".day-container").find("select");return a(this).is(":checked")?void c.attr("disabled","disabled"):void c.removeAttr("disabled")}),a("body").on("click",".js_wpcw_apply_hours_to_all",function(b){if(a(this).parents(".day-container").find("input.js_wpcw_closed_checkbox").is(":checked"))return a(".wpcw-widget-hours .day-container").find("select").attr("disabled","disabled"),a(".wpcw-widget-hours .day-checkbox-toggle").find("input.js_wpcw_closed_checkbox").prop("checked",!0),a(".wpcw-widget-hours .day-container").find(".hours-selection:not(:first)").remove(),void b.preventDefault();var c=a(this).parents(".day-container"),d=a(this).parents(".day-container").find(".hours-selection").length;a(".wpcw-widget-hours .day-container").find("select").removeAttr("disabled"),a(".wpcw-widget-hours .day-checkbox-toggle").find("input.js_wpcw_closed_checkbox").prop("checked",!1),a(".day-container").not(c).each(function(){a(this).find(".hidden-container .hours-selection:not(:first)").remove();for(var b=1,e=0;d>b;){var f=a(this).find(".hidden-container .hours-selection").last().clone();f.find('select[name*="[open]"], select[name*="[closed]"]').attr("name",function(a,b){return b.replace(/\[(\d+)\]$/,function(a,b){return"["+(+b+1)+"]"})}),f.find(".add-time").replaceWith('<a href="#" class="remove-time button-secondary"><span class="dashicons dashicons-no-alt"></span></a>'),f.insertAfter(a(this).find(".hidden-container .hours-selection").last()),b++}for(;d>=e;){var g=c.find(".hours-selection:nth-child("+e+") select:first-child").val(),h=c.find(".hours-selection:nth-child("+e+") select:nth-child(2)").val();a(this).find(".hours-selection:nth-child("+e+") select:first-child").val(g),a(this).find(".hours-selection:nth-child("+e+") select:nth-child(2)").val(h),e++}}),b.preventDefault()}),a(document).on("wpcw.change",b),a(document).on("click.widgets-toggle",b),a(document).on("widget-updated",b)})}(jQuery);